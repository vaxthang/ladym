/* ============================================
   MOBILE RESPONSIVENESS FIXES (≤480px)
   Fixes layout and overflow issues on small screens
   without affecting tablet (≥768px) or desktop (≥1024px)
   ============================================ */

/* ============================================
   BASE MOBILE FIXES (320px - 480px)
   ============================================ */

@media (max-width: 480px) {
    /* Prevent horizontal overflow but allow vertical scrolling */
    body {
        overflow-x: hidden;
        overflow-y: auto;
    }
    
    .wrapper {
        overflow-x: hidden;
        overflow-y: visible;
        width: 100%;
    }
    
    /* Container adjustments */
    .container {
        padding: 0 12px;
        max-width: 100%;
    }
    
    /* Base font size scaling */
    body {
        font-size: clamp(14px, 3.5vw, 16px);
    }
    
    /* Fix padding sections */
    .fix-padding {
        padding: 0 0 40px 0;
    }
    
    /* Main content spacing */
    .main {
        margin-top: calc(56px + 30px);
    }
}

/* ============================================
   WELCOME SLIDER FIXES
   ============================================ */

@media (max-width: 480px) {
    .welcome {
        padding: 0 0 30px 0;
    }
    
    .welcomeSwiper {
        height: 380px;
        border-radius: 20px;
    }
    
    .welcome__content {
        padding: 0 16px;
        max-width: 95%;
    }
    
    .welcome__title {
        font-size: clamp(20px, 6vw, 28px);
        margin-bottom: 8px;
    }
    
    .welcome__subtitle {
        font-size: clamp(13px, 3.5vw, 15px);
        margin-bottom: 16px;
    }
    
    .welcome__btn {
        padding: 9px 18px;
        font-size: clamp(13px, 3.5vw, 15px);
    }
    
    .welcomeSwiper .swiper-slide[data-slide="0"] .welcome__content,
    .welcomeSwiper .swiper-slide[data-slide="1"] .welcome__content {
        margin-left: 16px;
    }
    
    .welcomeSwiper .swiper-slide[data-slide="2"] .welcome__content,
    .welcomeSwiper .swiper-slide[data-slide="3"] .welcome__content {
        margin-right: 16px;
    }
    
    .welcome__pagination-wrapper {
        margin-top: 16px;
        padding: 0 8px;
    }
    
    .welcome__pagination-wrapper .swiper-pagination-bullet {
        width: 8px;
        height: 8px;
    }
}

/* ============================================
   TYPES SECTION FIXES
   ============================================ */

@media (max-width: 480px) {
    .types {
        padding: 0 0 40px 0;
    }
    
    .types__items {
        gap: 8px;
    }
    
    .types__item {
        min-height: 280px;
        border-radius: 20px;
    }
    
    .types__title {
        font-size: clamp(13px, 3.5vw, 15px);
        margin-top: 10px;
        padding: 0 14px;
    }
}

/* ============================================
   CAKES SECTION FIXES
   ============================================ */

@media (max-width: 480px) {
    .cakes__header {
        margin-bottom: 24px;
        gap: 16px;
    }
    
    .cakes__title {
        font-size: clamp(20px, 5vw, 24px);
    }
    
    .cakes__nav {
        gap: 6px;
        width: 100%;
    }
    
    .cakes__nav-btn {
        font-size: clamp(12px, 3vw, 14px);
        padding: 7px 14px;
        white-space: nowrap;
    }
    
    /* Cards grid - ensure single column on mobile */
    .cakes__cards {
        grid-template-columns: 1fr;
        gap: 12px;
        max-width: 100%;
    }
    
    .cakes__card {
        max-width: 100%;
        min-height: 400px;
        border-radius: 24px;
    }
    
    .cakes__img {
        min-height: 260px;
        border-radius: 14px;
    }
    
    .cakes__badge {
        bottom: 10px;
        left: 10px;
        padding: 6px 12px;
        font-size: clamp(10px, 2.5vw, 11px);
    }
    
    .cakes__badge-icon {
        width: 14px;
        height: 14px;
    }
    
    .cakes__badge--secondary {
        bottom: 50px;
    }
    
    .cakes__info {
        max-width: 100%;
        margin-left: 16px;
        margin-right: 16px;
        padding: 12px 0;
    }
    
    .cakes__name {
        font-size: clamp(14px, 3.5vw, 16px);
        margin-bottom: 10px;
    }
    
    .cakes__btn {
        flex-wrap: nowrap;
        white-space: nowrap;
        gap: 6px;
        margin-top: 12px;
    }
    
    .cakes__btn--price {
        max-width: 85px;
        min-width: 85px;
        padding: 9px 12px;
        font-size: clamp(13px, 3vw, 14px);
    }
    
    .cakes__btn--order {
        flex: 1;
        padding: 9px 12px;
        font-size: clamp(13px, 3vw, 14px);
    }
}

/* ============================================
   CAKE MODAL FIXES
   ============================================ */

@media (max-width: 480px) {
    .cake-modal {
        width: 100vw;
        height: 100vh;
        max-width: 100vw;
        max-height: 100vh;
        border-radius: 0;
        top: 0;
        left: 0;
        transform: none;
    }
    
    .cake-modal__content {
        width: 100%;
        height: 100%;
        flex-direction: column;
    }
    
    .cake-modal__gallery {
        width: 100%;
        height: 45vh;
        min-height: 300px;
        max-height: 400px;
        border-radius: 0;
    }
    
    .cake-modal__info {
        width: 100%;
        height: auto;
        flex: 1;
        padding: 16px;
        gap: 12px;
        overflow-y: auto;
    }
    
    #cakeModalTitle {
        font-size: clamp(18px, 4.5vw, 20px);
    }
    
    #cakeModalSize {
        font-size: clamp(14px, 3.5vw, 16px);
    }
    
    #cakeModalDesc {
        font-size: clamp(14px, 3.5vw, 16px);
    }
    
    .cake-modal__sizes {
        gap: 6px;
        flex-wrap: wrap;
    }
    
    .cake-modal__sizes button {
        font-size: clamp(14px, 3.5vw, 16px);
        padding: 9px 16px;
        min-width: calc(50% - 3px);
        max-width: calc(50% - 3px);
    }
    
    .cake-modal__btns {
        width: 92% !important;
        gap: 6px;
        flex-wrap: nowrap;
    }
    
    .cake-modal__quantity {
        min-width: 100px;
        max-width: 100px;
        padding: 8px 12px;
    }
    
    #cakeModalOrder {
        font-size: clamp(14px, 3.5vw, 16px);
        padding: 10px 16px;
        flex: 1;
    }
    
    .cake-modal__close-btn {
        display: flex;
        top: 10px;
        right: 10px;
        width: 40px;
        height: 40px;
    }
    
    .cake-modal__thumbnails-container {
        bottom: 10px;
        left: 10px;
        right: 10px;
        height: 70px;
    }
    
    .cake-modal__gallery .thumbSwiper {
        height: 70px;
    }
    
    .cake-modal__gallery .thumbSwiper .swiper-slide {
        width: 50px !important;
        min-width: 50px;
        height: 50px;
    }
}

/* ============================================
   CART MODAL FIXES
   ============================================ */

@media (max-width: 480px) {
    .cart-modal,
    .cart-modal.hover-mode {
        right: 4px;
        left: 4px;
        top: 62px;
        max-height: calc(100vh - 72px);
    }
    
    .cart-modal__content {
        padding: 16px 10px 10px 10px;
        border-radius: 20px;
        max-height: calc(100vh - 72px);
        gap: 16px;
    }
    
    .cart-modal__title {
        font-size: clamp(16px, 4vw, 18px);
    }
    
    .cart-modal__count {
        font-size: clamp(16px, 4vw, 18px);
        position: static;
        margin-left: 6px;
    }
    
    .cart-modal__delete-all {
        width: 30px;
        height: 30px;
        min-width: 30px;
    }
    
    .cart-modal__delete-all img {
        width: 13px;
        height: 15px;
    }
    
    .cart-modal__close {
        width: 30px;
        height: 30px;
        min-width: 30px;
        right: -38px;
    }
    
    .cart-modal__close img {
        width: 8px;
        height: 8px;
    }
    
    .cart-modal__items {
        max-height: 86px; /* Scroll after 1 item on phones */
        gap: 14px;
    }
    
    .cart-modal__item {
        gap: 10px;
    }
    
    .cart-modal__item-img {
        width: 60px;
        height: 60px;
        min-width: 60px;
        border-radius: 10px;
    }
    
    .cart-modal__item-title {
        font-size: clamp(13px, 3.2vw, 14px);
    }
    
    .cart-modal__item-desc {
        font-size: clamp(12px, 3vw, 13px);
    }
    
    .cart-modal__item-quantity {
        min-width: 85px;
        max-width: 85px;
        padding: 5px 10px;
        height: 36px;
    }
    
    .cart-modal__qty-value {
        font-size: clamp(13px, 3.2vw, 14px);
    }
    
    .cart-modal__item-price {
        font-size: clamp(13px, 3.2vw, 14px);
        padding: 5px 10px;
    }
    
    .cart-modal__checkout-btn,
    .cart-modal__watch-btn {
        font-size: clamp(13px, 3.2vw, 14px);
        padding: 9px 14px;
    }
    
    .cart-modal__empty-message {
        font-size: clamp(13px, 3.2vw, 14px);
    }
}

/* ============================================
   CHECKOUT PAGE FIXES
   ============================================ */

@media (max-width: 480px) {
    .checkout-header__title {
        font-size: clamp(16px, 4vw, 20px);
    }
    
    .breadcrumb {
        font-size: clamp(11px, 2.8vw, 13px);
        margin-bottom: 16px;
        flex-wrap: wrap;
    }
    
    .checkout {
        gap: 20px;
        margin-bottom: 40px;
    }
    
    .checkout__back {
        margin-bottom: 20px;
    }
    
    .checkout__back-btn {
        font-size: clamp(13px, 3.2vw, 14px);
        padding: 8px 14px;
    }
    
    .form-section {
        padding: 14px;
        border-radius: 16px;
    }
    
    .form-section__title {
        font-size: clamp(16px, 4vw, 18px);
        margin-bottom: 16px;
    }
    
    .form-label {
        font-size: clamp(12px, 3vw, 13px);
        margin-bottom: 6px;
    }
    
    .form-input,
    .form-textarea {
        font-size: clamp(13px, 3.2vw, 14px);
        padding: 10px 12px;
        border-radius: 10px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
        gap: 0;
    }
    
    .form-group {
        margin-bottom: 16px;
    }
    
    .form-error {
        font-size: clamp(11px, 2.8vw, 12px);
    }
    
    .form-checkbox label {
        font-size: clamp(12px, 3vw, 13px);
    }
    
    .payment-icons {
        gap: 8px;
        margin-bottom: 16px;
        flex-wrap: wrap;
    }
    
    .payment-icon {
        width: 40px;
        height: 28px;
    }
    
    .checkout__submit-btn {
        font-size: clamp(14px, 3.5vw, 15px);
        padding: 11px 20px;
        gap: 6px;
    }
    
    .checkout__submit-btn svg {
        width: 16px;
        height: 16px;
    }
    
    .order-summary {
        padding: 14px;
        border-radius: 16px;
        top: 80px;
    }
    
    .order-summary__title {
        font-size: clamp(18px, 4.5vw, 20px);
        margin-bottom: 16px;
    }
    
    .order-summary__items {
        max-height: 280px;
        margin-bottom: 16px;
    }
    
    .summary-item {
        padding: 12px 0;
        gap: 10px;
    }
    
    .summary-item__image {
        width: 60px;
        height: 60px;
        min-width: 60px;
        border-radius: 10px;
    }
    
    .summary-item__name {
        font-size: clamp(13px, 3.2vw, 14px);
    }
    
    .summary-item__desc {
        font-size: clamp(11px, 2.8vw, 12px);
    }
    
    .summary-item__quantity {
        font-size: clamp(12px, 3vw, 13px);
    }
    
    .summary-item__price {
        font-size: clamp(13px, 3.2vw, 14px);
    }
    
    .summary-row {
        font-size: clamp(13px, 3.2vw, 14px);
        padding: 8px 0;
    }
    
    .summary-row--total {
        font-size: clamp(16px, 4vw, 18px);
        padding-top: 12px;
        margin-top: 6px;
    }
    
    .order-summary__trust {
        font-size: clamp(11px, 2.8vw, 12px);
        padding: 10px;
        margin-top: 16px;
    }
    
    .success-modal__content {
        padding: 24px 16px;
        border-radius: 20px;
    }
    
    .success-modal__icon {
        width: 60px;
        height: 60px;
        margin-bottom: 20px;
    }
    
    .success-modal__icon svg {
        width: 40px;
        height: 40px;
    }
    
    .success-modal__title {
        font-size: clamp(20px, 5vw, 24px);
        margin-bottom: 12px;
    }
    
    .success-modal__message {
        font-size: clamp(13px, 3.2vw, 14px);
        margin-bottom: 16px;
    }
    
    .success-modal__order-number {
        font-size: clamp(13px, 3.2vw, 14px);
        margin-bottom: 24px;
        padding: 12px;
    }
    
    .success-modal__btn {
        font-size: clamp(14px, 3.5vw, 15px);
        padding: 12px 24px;
    }
    
    .empty-cart__icon {
        width: 60px;
        height: 60px;
        margin-bottom: 20px;
    }
    
    .empty-cart__icon svg {
        width: 32px;
        height: 32px;
    }
    
    .empty-cart__title {
        font-size: clamp(18px, 4.5vw, 20px);
        margin-bottom: 10px;
    }
    
    .empty-cart__message {
        font-size: clamp(13px, 3.2vw, 14px);
        margin-bottom: 24px;
    }
    
    .empty-cart__btn {
        font-size: clamp(14px, 3.5vw, 15px);
        padding: 11px 24px;
    }
}

/* ============================================
   EXTRA SMALL SCREENS (320px - 375px)
   ============================================ */

@media (max-width: 375px) {
    .container {
        padding: 0 10px;
    }
    
    .welcomeSwiper {
        height: 340px;
        border-radius: 18px;
    }
    
    .welcome__title {
        font-size: clamp(18px, 5.5vw, 24px);
    }
    
    .welcome__subtitle {
        font-size: clamp(12px, 3.2vw, 14px);
    }
    
    .welcome__btn {
        padding: 8px 16px;
        font-size: clamp(12px, 3.2vw, 14px);
    }
    
    .types__item {
        min-height: 260px;
        border-radius: 18px;
    }
    
    .types__title {
        font-size: clamp(12px, 3.2vw, 14px);
        margin-top: 8px;
        padding: 0 12px;
    }
    
    .cakes__title {
        font-size: clamp(18px, 4.5vw, 22px);
    }
    
    .cakes__nav-btn {
        font-size: clamp(11px, 2.8vw, 13px);
        padding: 6px 12px;
    }
    
    .cakes__card {
        min-height: 380px;
        border-radius: 22px;
    }
    
    .cakes__img {
        min-height: 240px;
    }
    
    .cakes__info {
        margin-left: 14px;
        margin-right: 14px;
    }
    
    .cart-modal__content {
        padding: 14px 8px 8px 8px;
    }
    
    .form-section {
        padding: 12px;
    }
    
    .order-summary {
        padding: 12px;
    }
}

/* ============================================
   VERY SMALL SCREENS (≤360px)
   ============================================ */

@media (max-width: 360px) {
    body {
        font-size: 14px;
    }
    
    .container {
        padding: 0 8px;
    }
    
    .welcomeSwiper {
        height: 320px;
        border-radius: 16px;
    }
    
    .welcome__content {
        padding: 0 12px;
    }
    
    .welcome__title {
        font-size: 18px;
        margin-bottom: 6px;
    }
    
    .welcome__subtitle {
        font-size: 12px;
        margin-bottom: 14px;
    }
    
    .welcome__btn {
        padding: 7px 14px;
        font-size: 12px;
    }
    
    .types__item {
        min-height: 240px;
        border-radius: 16px;
    }
    
    .types__title {
        font-size: 12px;
        margin-top: 8px;
    }
    
    .cakes__title {
        font-size: 18px;
    }
    
    .cakes__nav-btn {
        font-size: 11px;
        padding: 5px 10px;
    }
    
    .cakes__card {
        min-height: 360px;
        border-radius: 20px;
    }
    
    .cakes__img {
        min-height: 220px;
    }
    
    .cakes__info {
        margin-left: 12px;
        margin-right: 12px;
        padding: 10px 0;
    }
    
    .cakes__name {
        font-size: 13px;
    }
    
    .cakes__btn--price {
        max-width: 75px;
        min-width: 75px;
        padding: 8px 10px;
        font-size: 12px;
    }
    
    .cakes__btn--order {
        padding: 8px 10px;
        font-size: 12px;
    }
    
    .cart-modal__title {
        font-size: 15px;
    }
    
    .cart-modal__count {
        font-size: 15px;
    }
    
    .cart-modal__item-img {
        width: 55px;
        height: 55px;
        min-width: 55px;
    }
    
    .form-section {
        padding: 10px;
        border-radius: 14px;
    }
    
    .form-section__title {
        font-size: 15px;
    }
    
    .form-input,
    .form-textarea {
        font-size: 13px;
        padding: 9px 11px;
    }
    
    .checkout__submit-btn {
        font-size: 13px;
        padding: 10px 18px;
    }
    
    .order-summary {
        padding: 10px;
        border-radius: 14px;
    }
    
    .order-summary__title {
        font-size: 16px;
    }
    
    .summary-item__image {
        width: 55px;
        height: 55px;
        min-width: 55px;
    }
}

/* ============================================
   CRITICAL: Prevent any element overflow
   ============================================ */

@media (max-width: 480px) {
    * {
        max-width: 100%;
    }
    
    img,
    svg,
    video,
    iframe {
        max-width: 100%;
        height: auto;
    }
    
    /* Ensure no element causes horizontal scroll - but don't use overflow-x hidden */
    .wrapper,
    .header,
    .main,
    .container {
        max-width: 100vw;
    }
    
    /* Sections should also not have overflow-x hidden to prevent background issues */
    section {
        max-width: 100vw;
    }
    
    /* Fix any potential button overflow */
    button,
    .btn {
        max-width: 100%;
        word-wrap: break-word;
    }
    
    /* Ensure text doesn't overflow */
    h1, h2, h3, h4, h5, h6,
    p, span, div {
        word-wrap: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
    }
}

/* ============================================
   HEADER OVERFLOW FIX AT 480px
   ============================================ */

@media (max-width: 480px) {
    .header {
        overflow: visible;
    }
    
    .nav {
        overflow: visible;
        max-width: 100%;
    }
    
    .header__btns {
        overflow: visible;
        max-width: 100%;
    }
    
    .header__search-container {
        overflow: visible;
        max-width: 100%;
    }
}

/* ============================================
   VERY SMALL SCREENS - MENU POSITIONING FIX
   ============================================ */

@media (max-width: 319px) {
    /* Ensure hamburger menu doesn't open automatically */
    .header__menu {
        left: auto !important;
        right: -107% !important;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .header__menu.active {
        left: auto !important;
        right: 0 !important;
    }
    
    /* Keep mobile overlay hidden by default */
    .header__mobile-overlay {
        display: none;
        opacity: 0;
    }
    
    .header__mobile-overlay.active {
        display: block;
        opacity: 1;
    }
    
    /* Ensure menu stays on right when search expands */
    .nav {
        grid-template-columns: auto 1fr auto;
        gap: 8px;
    }
    
    .header__logo {
        order: 1;
    }
    
    .header__btns {
        order: 2;
        flex: 1;
        justify-content: center;
    }
    
    .header__hamburger {
        order: 3;
        margin-left: 0;
        margin-right: 0;
    }
}

/* ============================================
   ADDITIONAL FIXES FOR EDGE CASES
   ============================================ */

@media (max-width: 315px) {
    /* Prevent hamburger menu from auto-opening - opens from RIGHT */
    .header__hamburger {
        pointer-events: auto;
    }
    
    .header__hamburger:not(.active) ~ .header__menu {
        right: -107% !important;
        left: auto !important;
    }
    
    .header__hamburger:not(.active) ~ .header__mobile-overlay {
        display: none !important;
        opacity: 0 !important;
    }
    
    /* Make menu narrower on very small screens - opens from RIGHT */
    .header__menu {
        max-width: calc(100vw - 30px) !important;
        width: calc(100vw - 30px) !important;
        right: -100% !important;
        left: auto !important;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .header__menu.active {
        right: 0 !important;
        left: auto !important;
    }
}

@media (max-width: 280px) {
    /* Even narrower menu for extremely small screens - opens from RIGHT */
    .header__menu {
        max-width: calc(100vw - 20px) !important;
        width: calc(100vw - 20px) !important;
        padding: 10px !important;
        padding-top: 55px !important;
        right: -100% !important;
        left: auto !important;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);
        transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .header__menu.active {
        right: 0 !important;
        left: auto !important;
    }
}

/* ============================================
   END OF MOBILE FIXES
   ============================================ */